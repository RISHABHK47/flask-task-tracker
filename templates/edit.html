{% extends "base.html" %}
{% block content %}

<div class="edit-page">
  <!-- Breadcrumb Navigation -->
  <nav class="breadcrumb">
    <a href="{{ url_for('index') }}" class="breadcrumb-link">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M6.66667 12.6667L2 8M2 8L6.66667 3.33333M2 8H14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      Back to Tasks
    </a>
  </nav>

  <!-- Edit Form Card -->
  <div class="edit-card">
    <div class="edit-header">
      <div class="edit-icon">
        <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect width="32" height="32" rx="8" fill="url(#editGradient)"/>
          <path d="M18.667 9.33337C18.9204 9.07995 19.2235 8.87915 19.5577 8.74338C19.8918 8.60761 20.2499 8.53931 20.611 8.54171C20.9721 8.54411 21.3292 8.61716 21.6615 8.75695C21.9938 8.89674 22.2943 9.10074 22.5444 9.35782C22.7945 9.6149 22.9896 9.91942 23.1188 10.2545C23.2481 10.5897 23.3091 10.9485 23.2982 11.3088C23.2873 11.669 23.2047 12.0234 23.0555 12.3501C22.9063 12.6768 22.6935 12.9689 22.4297 13.209L13.6417 21.997L9.33301 23.0003L10.3363 18.6917L19.1243 9.90371L18.667 9.33337Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <defs>
            <linearGradient id="editGradient" x1="0" y1="0" x2="32" y2="32" gradientUnits="userSpaceOnUse">
              <stop stop-color="#6366F1"/>
              <stop offset="1" stop-color="#8B5CF6"/>
            </linearGradient>
          </defs>
        </svg>
      </div>
      <div>
        <h2 class="edit-title">Edit Task</h2>
        <p class="edit-subtitle">Update your task details below</p>
      </div>
    </div>

    <form action="{{ url_for('edit_task', task_id=task.id) }}" method="post" class="edit-form">
      <div class="form-group">
        <label for="edit-title" class="form-label">
          Task Title
          <span class="required">*</span>
        </label>
        <div class="input-wrapper">
          <svg class="input-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9 3H3.66667C3.22464 3 2.80072 3.17559 2.48816 3.48816C2.17559 3.80072 2 4.22464 2 4.66667V16.3333C2 16.7754 2.17559 17.1993 2.48816 17.5118C2.80072 17.8244 3.22464 18 3.66667 18H15.3333C15.7754 18 16.1993 17.8244 16.5118 17.5118C16.8244 17.1993 17 16.7754 17 16.3333V11M15.6667 1.66667C16.0203 1.31305 16.5 1.11438 17 1.11438C17.5 1.11438 17.9797 1.31305 18.3333 1.66667C18.687 2.02029 18.8856 2.5 18.8856 3C18.8856 3.5 18.687 3.97971 18.3333 4.33333L10 12.6667L6.66667 13.5L7.5 10.1667L15.6667 1.66667Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <input 
            type="text" 
            id="edit-title"
            name="title" 
            class="form-input form-input-icon" 
            value="{{ task.title }}" 
            required
            autocomplete="off"
            placeholder="Enter task title"
          >
        </div>
      </div>
      
      <div class="form-group">
        <label for="edit-description" class="form-label">
          Description
          <span class="optional-badge">Optional</span>
        </label>
        <div class="input-wrapper">
          <svg class="textarea-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M15 2.5H5C4.17157 2.5 3.5 3.17157 3.5 4V16C3.5 16.8284 4.17157 17.5 5 17.5H15C15.8284 17.5 16.5 16.8284 16.5 16V4C16.5 3.17157 15.8284 2.5 15 2.5Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M6.5 6.5H13.5M6.5 10H13.5M6.5 13.5H10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <textarea 
            id="edit-description"
            name="description" 
            class="form-textarea form-textarea-icon" 
            placeholder="Add more details about your task..."
            rows="4"
          >{{ task.description or '' }}</textarea>
        </div>
      </div>

      <!-- Two Column Layout for Priority and Status -->
      <div class="form-row">
        <div class="form-group">
          <label for="edit-priority" class="form-label">
            Priority
            <span class="optional-badge">Optional</span>
          </label>
          <div class="input-wrapper">
            <svg class="input-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M10 4V16M10 4L6 8M10 4L14 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <select 
              id="edit-priority"
              name="priority" 
              class="form-select form-input-icon"
            >
              <option value="" {% if not task.priority %}selected{% endif %}>Select Priority (Optional)</option>
              <option value="Low" {% if task.priority == "Low" %}selected{% endif %}>üü¢ Low</option>
              <option value="Medium" {% if task.priority == "Medium" %}selected{% endif %}>üü° Medium</option>
              <option value="High" {% if task.priority == "High" %}selected{% endif %}>üî¥ High</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label for="edit-status" class="form-label">
            Status
            <span class="optional-badge">Optional</span>
          </label>
          <div class="input-wrapper">
            <svg class="input-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M10 2C5.58172 2 2 5.58172 2 10C2 14.4183 5.58172 18 10 18C14.4183 18 18 14.4183 18 10C18 5.58172 14.4183 2 10 2Z" stroke="currentColor" stroke-width="1.5"/>
              <path d="M10 6V10L13 13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <select 
              id="edit-status"
              name="status" 
              class="form-select form-input-icon"
            >
              <option value="" {% if not task.status %}selected{% endif %}>Select Status (Optional)</option>
              <option value="Not Started" {% if task.status == "Not Started" %}selected{% endif %}>üìã Not Started</option>
              <option value="In Progress" {% if task.status == "In Progress" %}selected{% endif %}>‚öôÔ∏è In Progress</option>
              <option value="Completed" {% if task.status == "Completed" %}selected{% endif %}>‚úÖ Completed</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Two Column Layout for Due Date and Duration -->
      <div class="form-row">
        <div class="form-group">
          <label for="edit-due-date" class="form-label">
            Due Date
            <span class="optional-badge">Optional</span>
          </label>
          <div class="input-wrapper">
            <svg class="input-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect x="3" y="4" width="14" height="14" rx="2" stroke="currentColor" stroke-width="1.5"/>
              <path d="M3 8H17M7 2V6M13 2V6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
            <input 
              type="date" 
              id="edit-due-date"
              name="due_date" 
              class="form-input form-input-icon" 
              value="{{ task.due_date or '' }}"
            >
          </div>
        </div>

        <div class="form-group">
          <label for="edit-duration" class="form-label">
            Duration (Days)
            <span class="optional-badge">Optional</span>
          </label>
          <div class="input-wrapper">
            <svg class="input-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M10 5V10L13 12M18 10C18 14.4183 14.4183 18 10 18C5.58172 18 2 14.4183 2 10C2 5.58172 5.58172 2 10 2C14.4183 2 18 5.58172 18 10Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <input 
              type="number" 
              id="edit-duration"
              name="duration" 
              class="form-input form-input-icon" 
              value="{{ task.duration or '' }}"
              placeholder="e.g., 5"
              min="1"
              max="365"
            >
          </div>
        </div>
      </div>

      <!-- Task Info -->
      <div class="task-info">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M8 4V8L10.5 9.5M14 8C14 11.3137 11.3137 14 8 14C4.68629 14 2 11.3137 2 8C2 4.68629 4.68629 2 8 2C11.3137 2 14 4.68629 14 8Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span>Created on {{ task.created_at.strftime("%B %d, %Y at %I:%M %p") }}</span>
      </div>

      <!-- Action Buttons -->
      <div class="form-actions">
        <button type="submit" class="btn btn-primary">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M15 5L7.5 12.5L4 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Save Changes
        </button>
        <a href="{{ url_for('index') }}" class="btn btn-secondary">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M15 5L5 15M5 5L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Cancel
        </a>
      </div>
    </form>
  </div>

  <!-- Helpful Tips Section -->
  <div class="tips-section">
    <div class="tip-card">
      <div class="tip-icon">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M10 1C5.02944 1 1 5.02944 1 10C1 14.9706 5.02944 19 10 19C14.9706 19 19 14.9706 19 10C19 5.02944 14.9706 1 10 1Z" stroke="currentColor" stroke-width="1.5"/>
          <path d="M10 14V10M10 6H10.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </div>
      <div>
        <h3 class="tip-title">Quick Tip</h3>
        <p class="tip-text">Use clear, action-oriented titles for better task management. Add details in the description to track progress.</p>
      </div>
    </div>
  </div>
</div>

{% endblock %}